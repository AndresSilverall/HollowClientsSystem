{% extends "dashboard.html" %}
{% load static %}
{% block title %} Gestor de tickets {% endblock %}

{% block extra_styles %}
    
{% endblock %}

{% block content %}

		<nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
			<ul class="breadcrumb">
				<li class="breadcrumb-item"><a class="text-decoration-none link-primary" href="{% url 'dashboard' %}">Menú</a></li>
				<li class="breadcrumb-item active" aria-current="page"><a href="{% url 'tickets' %}"><span class="badge bg-secondary rounded-pill">Gestor tickets</span></a></li>
			</ul>
		</nav>

    <h3 class="text-center lead"> Panel de gestor de tickets <i class="fas fa-ticket-alt"></i></h3>

    <div class="d-flex align-items-center justify-content-center py-5" style="gap: 0.9rem;" >
        <div class="p-4 border">
            <h2 class="lead">Total de tickets</h2>
        </div>
        <div class="p-4 border">
            <h2 class="lead">Tickets cerrados</h2>
        </div>
        <div class="p-4 border">
            <h2 class="lead">Tickets abiertos</h2>
        </div>
        <div class="p-4 border">
            <h2 class="lead">Tickets pendientes</h2>
        </div>
        <div class="p-4 border">
            <h2 class="lead">Tickets resueltos</h2>
        </div>
    </div>

    <a class="btn btn-outline-secondary" href="{% url 'generate_ticket' %}"><i class="fas fa-plus"></i> Crear un nuevo ticket</a>
		<div class="table-responsive py-5">
			<table class="table table-bordered">
        <thead>
            <tr>
                <th>Asunto</th>
                <th>Cliente</th>
                <th>Asignado a</th>
                <th>Agente</th>
                <th>Descripción</th>
                <th>Prioridad</th>
                <th>Tipo</th>
                <th>Canal</th>
                <th>Fecha</th>
                <th></th>
            </tr>
        </thead>
            <tbody>
							{% for ticket in tickets %}
                <tr>
									<td>{{ticket.subject}}</td>
									<td>{{ticket.customer}}</td>
									<td>{{ticket.asigned_to}}</td>
									<td>{{ticket.agent}}</td>
									<td>{{ticket.description}}</td>
									{% if ticket.priority == "NORMAL" %}
											<td><span class="badge rounded-pill bg-success">{{ticket.priority}}</span></td>
									{% elif ticket.priority == "MEDIANA" %}
											<td><span class="badge rounded-pill bg-warning">{{ ticket.priority }}</span></td>
									{% elif ticket.priority == "ALTA" %}
											<td><span class="badge rounded-pill bg-danger">{{ ticket.priority }}</span></td>
									{% endif %}
									<td>{{ticket.ticket_type}}</td>
									<td>{{ticket.chanel}}</td>
									<td>{{ticket.created_at}}</td>
									<td><i class="fas fa-bars justify-content-center"></i></td>
                </tr>
							{% endfor %}
            </tbody>
      </table>
		</div>

    {% block child_js_below_files %} 
        <script src="/static/bootstrap/js/bootstrap.bundle.min.js"></script>
    {% endblock %}

{% endblock %}
